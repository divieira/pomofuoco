<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomofuoco</title>
  <link rel="stylesheet" href="../shared/theme.css">
  <link rel="stylesheet" href="board.css">
  <link rel="stylesheet" href="weekly.css">
  <link rel="stylesheet" href="monthly.css">
</head>
<body>
  <!-- Timer Bar -->
  <header class="timer-bar">
    <div class="timer-bar-left">
      <span class="timer-logo">Pomofuoco</span>
      <div class="timer-display">
        <span class="timer-time" id="timerTime">00:00</span>
        <span class="timer-label" id="timerLabel">Ready</span>
        <span class="timer-cycle" id="timerCycle"></span>
      </div>
      <div class="timer-progress-wrap">
        <div class="timer-progress" id="timerProgress"></div>
      </div>
    </div>
    <div class="timer-bar-center">
      <span class="timer-doing-task" id="timerDoingTask"></span>
    </div>
    <div class="timer-bar-right">
      <button class="btn btn-focus" id="btnFocus" title="Start Focus (25m)">Focus</button>
      <button class="btn btn-short" id="btnShortBreak" title="Short Break (5m)">Short</button>
      <button class="btn btn-long" id="btnLongBreak" title="Long Break (15m)">Long</button>
      <button class="btn btn-stop hidden" id="btnStop" title="Stop session">Stop</button>
    </div>
  </header>

  <!-- Tab Navigation -->
  <nav class="tab-nav">
    <button class="tab-btn active" data-tab="board">Board</button>
    <button class="tab-btn" data-tab="weekly">Weekly</button>
    <button class="tab-btn" data-tab="monthly">Monthly</button>
    <div class="tab-nav-right">
      <button class="btn-icon" id="btnSettings" title="Settings">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="10" cy="10" r="3"/>
          <path d="M10 1v2M10 17v2M1 10h2M17 10h2M3.5 3.5l1.4 1.4M15.1 15.1l1.4 1.4M3.5 16.5l1.4-1.4M15.1 4.9l1.4-1.4"/>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Board Tab -->
  <main class="tab-content active" id="tabBoard">
    <div class="kanban">
      <div class="kanban-column" data-column="todo">
        <div class="kanban-header">
          <h2>To-Do</h2>
          <span class="kanban-count" id="countTodo">0</span>
        </div>
        <div class="kanban-cards" id="cardsTodo"></div>
        <div class="kanban-input-wrap">
          <input type="text" class="kanban-input" id="inputTodo" placeholder="Add a task..." autocomplete="off">
        </div>
      </div>

      <div class="kanban-column" data-column="doing">
        <div class="kanban-header">
          <h2>Doing</h2>
          <span class="kanban-count" id="countDoing">0</span>
        </div>
        <div class="kanban-cards" id="cardsDoing"></div>
      </div>

      <div class="kanban-column" data-column="done">
        <div class="kanban-header">
          <h2>Done</h2>
          <span class="kanban-count" id="countDone">0</span>
        </div>
        <div class="kanban-cards" id="cardsDone"></div>
        <button class="btn btn-clear-done hidden" id="btnClearDone">Clear completed</button>
      </div>
    </div>

    <!-- Current Stats Panel -->
    <div class="stats-panel" id="statsPanel">
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">Today's Sessions</div>
          <div class="stat-value" id="statSessions">-</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Streak</div>
          <div class="stat-value" id="statStreak">-</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Tags Today</div>
          <div class="stat-value" id="statTags">-</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Domains Today</div>
          <div class="stat-value" id="statDomains">-</div>
        </div>
      </div>
    </div>
  </main>

  <!-- Weekly Tab -->
  <main class="tab-content" id="tabWeekly">
    <div class="weekly-container" id="weeklyContainer"></div>
  </main>

  <!-- Monthly Tab -->
  <main class="tab-content" id="tabMonthly">
    <div class="monthly-container" id="monthlyContainer"></div>
  </main>

  <!-- Settings Modal -->
  <div class="modal-overlay hidden" id="settingsModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="btn-icon modal-close" id="btnCloseSettings">&times;</button>
      </div>
      <div class="modal-body">
        <section class="settings-section">
          <h3>Blocked Domains</h3>
          <div class="settings-list" id="blockedDomainsList"></div>
          <div class="settings-add-row">
            <input type="text" id="inputNewDomain" placeholder="Add domain (e.g. reddit.com)" class="settings-input">
            <button class="btn btn-sm" id="btnAddDomain">Add</button>
          </div>
        </section>
        <section class="settings-section">
          <h3>Tags</h3>
          <div class="settings-list" id="tagSettingsList"></div>
        </section>
      </div>
    </div>
  </div>

  <script src="../shared/constants.js"></script>
  <script src="../shared/storage.js"></script>
  <script src="../shared/timer-core.js"></script>
  <script src="../shared/dashboard-utils.js"></script>
  <script src="../shared/task-utils.js"></script>
  <script src="weekly.js"></script>
  <script src="monthly.js"></script>
  <script src="board.js"></script>
</body>
</html>
